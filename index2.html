<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satri Plus | Anywhere Anytime เรียนได้ทุกที่ ทุกเวลา</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@200;300;400;500;600;700;800&family=Prompt:wght@200;300;400;500;600;700;800&display=swap');
        
        body {
            box-sizing: border-box;
            font-family: 'Kanit', 'Prompt', sans-serif;
            font-weight: 400;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Prompt', 'Kanit', sans-serif;
            font-weight: 600;
        }
        
        .font-light {
            font-weight: 300;
        }
        
        .font-normal {
            font-weight: 400;
        }
        
        .font-medium {
            font-weight: 500;
        }
        
        .font-semibold {
            font-weight: 600;
        }
        
        .font-bold {
            font-weight: 700;
        }
        
        .font-extrabold {
            font-weight: 800;
        }
        
        .text-elegant {
            font-family: 'Prompt', sans-serif;
            font-weight: 500;
            letter-spacing: 0.025em;
        }
        
        .text-beautiful {
            font-family: 'Kanit', sans-serif;
            font-weight: 400;
            line-height: 1.7;
        }
        .bg-gradient-blue {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
            position: relative;
        }
        .bg-gradient-blue::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
        }
        .bg-gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 50%, #c084fc 100%);
            position: relative;
        }
        .bg-gradient-purple::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
        }
        .bg-gradient-green {
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            position: relative;
        }
        .bg-gradient-green::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
        }
        .bg-gradient-orange {
            background: linear-gradient(135deg, #ea580c 0%, #f97316 50%, #fb923c 100%);
            position: relative;
        }
        .bg-gradient-orange::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
        }
        .bg-gradient-pink {
            background: linear-gradient(135deg, #db2777 0%, #ec4899 50%, #f472b6 100%);
            position: relative;
        }
        .bg-gradient-pink::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: inherit;
        }
        
        .blend-beautiful {
            mix-blend-mode: soft-light;
            opacity: 0.9;
        }
        
        .blend-elegant {
            mix-blend-mode: overlay;
            opacity: 0.8;
        }
        .shadow-custom {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.05);
        }
        .shadow-hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.1);
        }
        .glow-effect {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3), 0 0 40px rgba(59, 130, 246, 0.1);
        }
        .glow-purple {
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.3), 0 0 40px rgba(168, 85, 247, 0.1);
        }
        .flower-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e0f2fe' fill-opacity='0.1'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0 11.046 8.954 20 20 20s20-8.954 20-20-8.954-20-20-20-20 8.954-20 20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        .card-hover {
            transform: translateY(0);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .bounce-animation {
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="bg-white">
    <!-- Navigation -->
    <nav class="sticky-nav shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <img src="https://img5.pic.in.th/file/secure-sv1/IMG_0310f4b22b3a3a8d0946.jpeg" alt="โรงเรียนสตรีพัทลุง" class="h-10 w-10 object-contain shadow-lg rounded-full bg-white p-1" onerror="this.src=''; this.alt='โลโก้โรงเรียน'; this.style.display='none';">
                    <div>
                        <h1 class="text-xl font-bold text-blue-800">Satri Plus</h1>
                        <p class="text-xs text-gray-600">Anywhere Anytime</p>
                    </div>
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8">
                    <a href="#" onclick="showPage('home')" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">หน้าหลัก</a>
                    <a href="#" onclick="showPage('about')" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">เกี่ยวกับ</a>
                    <a href="#" onclick="showPage('subjects')" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">กลุ่มสาระการเรียนรู้</a>
                    <a href="#" onclick="showPage('contact')" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">ติดต่อ</a>
                    <a href="#" onclick="showPage('login')" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700 transition-colors">เข้าสู่ระบบ</a>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-gray-700 hover:text-blue-600 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-2">
                    <a href="#" onclick="showPage('home')" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">หน้าหลัก</a>
                    <a href="#" onclick="showPage('about')" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">เกี่ยวกับ</a>
                    <a href="#" onclick="showPage('subjects')" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">กลุ่มสาระการเรียนรู้</a>
                    <a href="#" onclick="showPage('contact')" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">ติดต่อ</a>
                    <a href="#" onclick="showPage('login')" class="bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700">เข้าสู่ระบบ</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="min-h-full">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <!-- Hero Section -->
            <section class="bg-gradient-to-br from-blue-50 via-white to-purple-50 py-20 shadow-inner relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-r from-blue-900/20 to-purple-900/20"></div>
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                    <div class="mb-8">
                        <div class="inline-block bg-white p-6 rounded-full shadow-lg mb-6 bounce-animation">
                            <svg class="w-20 h-20 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"/>
                                <path d="M19 15L20.09 18.26L23 19L20.09 19.74L19 23L17.91 19.74L15 19L17.91 18.26L19 15Z"/>
                                <path d="M5 15L6.09 18.26L9 19L6.09 19.74L5 23L3.91 19.74L1 19L3.91 18.26L5 15Z"/>
                            </svg>
                        </div>
                        <div class="flex items-center justify-center mb-4">
                            <img src="https://img5.pic.in.th/file/secure-sv1/IMG_0310f4b22b3a3a8d0946.jpeg" alt="โรงเรียนสตรีพัทลุง" class="h-16 w-16 object-contain shadow-lg rounded-full bg-white p-2 mr-4" onerror="this.src=''; this.alt='โลโก้โรงเรียน'; this.style.display='none';">
                            <h1 class="text-5xl md:text-7xl font-extrabold text-gray-800 pulse-animation text-elegant relative">
                                <span class="relative z-10">🌟 Satri Plus 🌟</span>
                                <div class="absolute inset-0 bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 opacity-20 blur-lg animate-pulse"></div>
                            </h1>
                        </div>
                        <p class="text-2xl md:text-3xl text-purple-600 mb-2 font-medium text-elegant">✨ Anywhere Anytime ✨</p>
                        <p class="text-xl text-blue-600 text-beautiful">📚 เรียนได้ทุกที่ ทุกเวลา 📱</p>
                    </div>
                    <div class="bg-white rounded-2xl shadow-custom p-8 max-w-3xl mx-auto card-hover blend-beautiful">
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 text-elegant">🏫 โรงเรียนสตรีพัทลุง</h2>
                        <p class="text-lg text-gray-600 leading-relaxed text-beautiful">🎯 แหล่งรวบรวมองค์ความรู้ทุกศาสตร์ตาม 9 กลุ่มสาระการเรียนรู้ เพื่อเพิ่มประสิทธิภาพในการเรียนรู้ของนักเรียน</p>
                        <div class="mt-6">
                            <button onclick="showPage('subjects')" class="bg-gradient-purple text-white px-8 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300 transform hover:scale-105 text-elegant glow-purple relative overflow-hidden">
                                <span class="relative z-10">🚀 เริ่มเรียนเลย!</span>
                                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-0 hover:opacity-20 transition-opacity duration-300 transform -skew-x-12"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="py-16 bg-gradient-to-br from-purple-50 to-pink-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">🎉 ทำไมต้องเลือก Satri Plus?</h2>
                        <div class="w-24 h-1 bg-gradient-purple mx-auto rounded-full"></div>
                    </div>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="bg-white rounded-2xl shadow-custom p-8 text-center card-hover">
                            <div class="w-20 h-20 bg-gradient-green rounded-full mx-auto mb-6 flex items-center justify-center">
                                <span class="text-4xl">📚</span>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-4">เนื้อหาครบครัน</h3>
                            <p class="text-gray-600">ครอบคลุมทุกกลุ่มสาระการเรียนรู้ พร้อมสื่อการเรียนการสอนที่หลากหลาย</p>
                        </div>
                        <div class="bg-white rounded-2xl shadow-custom p-8 text-center card-hover">
                            <div class="w-20 h-20 bg-gradient-orange rounded-full mx-auto mb-6 flex items-center justify-center">
                                <span class="text-4xl">⚡</span>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-4">เข้าถึงง่าย</h3>
                            <p class="text-gray-600">เรียนได้ทุกที่ ทุกเวลา ผ่านมือถือ แท็บเล็ต หรือคอมพิวเตอร์</p>
                        </div>
                        <div class="bg-white rounded-2xl shadow-custom p-8 text-center card-hover">
                            <div class="w-20 h-20 bg-gradient-pink rounded-full mx-auto mb-6 flex items-center justify-center">
                                <span class="text-4xl">🎯</span>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-4">ทดสอบความรู้</h3>
                            <p class="text-gray-600">แบบทดสอบออนไลน์ เพื่อประเมินความเข้าใจและพัฒนาตนเอง</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- About Page -->
        <div id="aboutPage" class="page hidden">
            <section class="py-16 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <div class="inline-block bg-gradient-purple p-4 rounded-full shadow-lg mb-6">
                            <i class="fas fa-school text-3xl text-white"></i>
                        </div>
                        <h1 class="text-5xl font-bold text-gray-800 mb-4">🏫 เกี่ยวกับเรา</h1>
                        <p class="text-xl text-gray-600 mb-6">ประวัติและข้อมูลของโรงเรียนสตรีพัทลุง</p>
                        <div class="w-32 h-1 bg-gradient-purple mx-auto rounded-full"></div>
                    </div>

                    <!-- School Info -->
                    <div class="grid md:grid-cols-2 gap-12 mb-16">
                        <div class="bg-white rounded-2xl shadow-custom p-8 card-hover border-l-4 border-blue-500">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 bg-gradient-blue rounded-full flex items-center justify-center mr-4">
                                    <i class="fas fa-history text-white text-lg"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-blue-800">📚 ประวัติโรงเรียนสตรีพัทลุง</h2>
                            </div>
                            <div class="prose text-gray-600 leading-relaxed space-y-4">
                                <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-blue-300">
                                    <p>โรงเรียนสตรีพัทลุง มีรากฐานมาจากโรงเรียนประชาบาล คือ โรงเรียนโสภณพัทลุงกุลจัดตั้งชั้นมัธยมปีละชั้น จนถึงชั้นมัธยมศึกษาปีที่ 4 โดยมี นายจรัล ดิสรา ครูใหญ่ฝ่ายประชาบาลเป็นผู้ดูแล</p>
                                </div>
                                
                                <div class="bg-purple-50 rounded-lg p-4 border-l-4 border-purple-300">
                                    <p><strong>ปี พ.ศ. 2471</strong> กระทรวงศึกษาธิการได้แต่งตั้งนางสาวปริก เด่นดาวเสือ รักษาการในตำแหน่งครูใหญ่คนแรก</p>
                                </div>
                                
                                <div class="bg-green-50 rounded-lg p-4 border-l-4 border-green-300">
                                    <p><strong>เมื่อ พ.ศ. 2482</strong> กระทรวงศึกษาธิการได้ให้งบประมาณก่อสร้างอาคารโรงเรียนสตรีพัทลุงหลังแรก สมัยขุนวิจารณ์จรรยา เป็นศึกษาธิการจังหวัดพัทลุง งบประมาณก่อสร้าง 6,000 บาท</p>
                                </div>
                                
                                <div class="bg-orange-50 rounded-lg p-4 border-l-4 border-orange-300">
                                    <p><strong>วันที่ 17 พฤษภาคม 2482</strong> นักเรียนได้ย้ายมาอยู่ ณ สถานที่แห่งใหม่ มีนักเรียนหญิงทั้งหมด 70 คน เปิดสอนตั้งแต่ชั้นมัธยมศึกษาปีที่ 1 ถึงชั้นมัธยมศึกษาปีที่ 6 จำนวน 6 ห้องเรียน</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl shadow-custom p-8 card-hover border-l-4 border-purple-500">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 bg-gradient-purple rounded-full flex items-center justify-center mr-4">
                                    <i class="fas fa-laptop text-white text-lg"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-purple-800">✨ เกี่ยวกับ Satri Plus</h2>
                            </div>
                            <div class="prose text-gray-600 leading-relaxed space-y-4">
                                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
                                    <p>"Satri-Plus" เป็น platform ที่โรงเรียนสตรีพัทลุงจัดทำขึ้นให้ผู้เรียนและผู้ที่สนใจเพื่อเป็นแหล่งรวบรวมองค์ความรู้ทุกศาสตร์ตาม 9 กลุ่มสาระการเรียนรู้</p>
                                </div>
                                
                                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200">
                                    <p>เป็นช่องทางให้ผู้เรียนเข้ามาทบทวนความรู้เพื่อเพิ่มประสิทธิภาพในการเรียนรู้ ตามแนวคิด <strong class="text-blue-600">Anywhere Anytime เรียนได้ทุกที่ ทุกเวลา</strong></p>
                                </div>
                                
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200">
                                    <p>ตามนโยบายของสำนักงานคณะกรรมการการศึกษาขั้นพื้นฐานกระทรวงศึกษาธิการ และเพื่อเป็นแหล่งรวบรวมความรู้ตามความถนัดและสนใจตามหลักสูตร <strong class="text-green-600">Building A Future อนาคตสร้างได้</strong> ที่โรงเรียนสตรีพัทลุง</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vision Mission Section -->
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="bg-white rounded-2xl shadow-custom p-6 text-center card-hover">
                            <div class="w-16 h-16 bg-gradient-blue rounded-full mx-auto mb-4 flex items-center justify-center">
                                <i class="fas fa-eye text-white text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">🎯 วิสัยทัศน์</h3>
                            <p class="text-gray-600">มุ่งสู่ความเป็นเลิศทางวิชาการ พัฒนาผู้เรียนให้มีคุณภาพ</p>
                        </div>
                        <div class="bg-white rounded-2xl shadow-custom p-6 text-center card-hover">
                            <div class="w-16 h-16 bg-gradient-green rounded-full mx-auto mb-4 flex items-center justify-center">
                                <i class="fas fa-bullseye text-white text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">🚀 พันธกิจ</h3>
                            <p class="text-gray-600">จัดการศึกษาที่มีคุณภาพ เน้นการเรียนรู้ตลอดชีวิต</p>
                        </div>
                        <div class="bg-white rounded-2xl shadow-custom p-6 text-center card-hover">
                            <div class="w-16 h-16 bg-gradient-purple rounded-full mx-auto mb-4 flex items-center justify-center">
                                <i class="fas fa-heart text-white text-2xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800 mb-3">💎 ค่านิยม</h3>
                            <p class="text-gray-600">ส่งเสริมคุณธรรม จริยธรรม และความเป็นไทย</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Subjects Page -->
        <div id="subjectsPage" class="page hidden">
            <section class="py-16 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h1 class="text-5xl font-bold text-gray-800 mb-4">🎓 กลุ่มสาระการเรียนรู้</h1>
                        <p class="text-xl text-gray-600 mb-6">เลือกกลุ่มสาระที่ต้องการเรียน</p>
                        <div class="w-32 h-1 bg-gradient-purple mx-auto rounded-full"></div>
                    </div>

                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8" id="subjectGroups">
                        <!-- Subject groups will be populated by JavaScript -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Individual Subject Page -->
        <div id="subjectDetailPage" class="page hidden">
            <section class="py-16 bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="mb-8">
                        <button onclick="showPage('subjects')" class="inline-flex items-center bg-white text-blue-600 hover:text-blue-800 px-4 py-2 rounded-full shadow-md hover:shadow-lg transition-all duration-300 mb-6">
                            <i class="fas fa-arrow-left mr-2"></i>กลับไปกลุ่มสาระการเรียนรู้
                        </button>
                        <div class="text-center">
                            <h1 id="subjectDetailTitle" class="text-5xl font-bold text-gray-800 mb-4"></h1>
                            <p class="text-xl text-gray-600 mb-6">รายวิชาและเนื้อหาการเรียนรู้</p>
                            <div class="w-32 h-1 bg-gradient-blue mx-auto rounded-full"></div>
                        </div>
                    </div>

                    <div class="mb-8" id="adminControls" style="display: none;">
                        <button onclick="showAddSubjectModal()" class="bg-gradient-green text-white px-6 py-3 rounded-full font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                            <i class="fas fa-plus mr-2"></i>✨ เพิ่มเรื่องใหม่
                        </button>
                    </div>

                    <div class="space-y-8" id="subjectList">
                        <!-- Subjects will be populated by JavaScript -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Page -->
        <div id="contactPage" class="page hidden">
            <section class="py-16 bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 min-h-screen">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <div class="inline-block bg-gradient-green p-4 rounded-full shadow-lg mb-6">
                            <i class="fas fa-phone text-3xl text-white"></i>
                        </div>
                        <h1 class="text-5xl font-bold text-gray-800 mb-4">📞 ติดต่อเรา</h1>
                        <p class="text-xl text-gray-600 mb-6">ช่องทางการติดต่อและข้อมูลโรงเรียน</p>
                        <div class="w-32 h-1 bg-gradient-green mx-auto rounded-full"></div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-12 mb-12">
                        <div class="bg-white rounded-2xl shadow-custom p-8 card-hover border-l-4 border-blue-500">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 bg-gradient-blue rounded-full flex items-center justify-center mr-4">
                                    <i class="fas fa-map-marker-alt text-white text-lg"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-blue-800">📍 ข้อมูลติดต่อ</h2>
                            </div>
                            <div class="space-y-6">
                                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                    <div class="flex items-start space-x-3">
                                        <i class="fas fa-map-marker-alt text-blue-600 mt-1 text-lg"></i>
                                        <div>
                                            <h3 class="font-bold text-gray-800 mb-2">🏫 ที่อยู่</h3>
                                            <p class="text-gray-600 leading-relaxed">250 ถนนราเมศวร์ ตำบลคูหาสวรรค์<br>อำเภอเมือง จังหวัดพัทลุง 93000</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                    <div class="flex items-start space-x-3">
                                        <i class="fas fa-phone text-green-600 mt-1 text-lg"></i>
                                        <div>
                                            <h3 class="font-bold text-gray-800 mb-2">📞 โทรศัพท์</h3>
                                            <p class="text-gray-600">074-613-023</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-orange-50 rounded-lg p-4 border border-orange-200">
                                    <div class="flex items-start space-x-3">
                                        <i class="fas fa-clock text-orange-600 mt-1 text-lg"></i>
                                        <div>
                                            <h3 class="font-bold text-gray-800 mb-2">⏰ เวลาทำการ</h3>
                                            <p class="text-gray-600">จันทร์ - ศุกร์: 08:00 - 16:30 น.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                    <div class="flex items-start space-x-3">
                                        <i class="fas fa-envelope text-purple-600 mt-1 text-lg"></i>
                                        <div>
                                            <h3 class="font-bold text-gray-800 mb-2">📧 อีเมล</h3>
                                            <p class="text-gray-600">satriphatthalung@spt.ac.th</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-2xl shadow-custom p-8 card-hover border-l-4 border-purple-500">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 bg-gradient-purple rounded-full flex items-center justify-center mr-4">
                                    <i class="fas fa-share-alt text-white text-lg"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-purple-800">🌐 ติดตามเรา</h2>
                            </div>
                            <div class="space-y-4">
                                <a href="https://www.facebook.com/spt.ac.th" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-4 bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-all duration-300 card-hover border border-blue-200">
                                    <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center">
                                        <i class="fab fa-facebook text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Facebook</h3>
                                        <p class="text-gray-600 text-sm">ติดตามข่าวสารและกิจกรรม</p>
                                    </div>
                                </a>
                                
                                <a href="https://www.instagram.com/sptschool_official?igsh=MWM0NWl2MmF1cXhvdw==" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-4 bg-pink-50 hover:bg-pink-100 p-4 rounded-lg transition-all duration-300 card-hover border border-pink-200">
                                    <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                                        <i class="fab fa-instagram text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">Instagram</h3>
                                        <p class="text-gray-600 text-sm">ภาพกิจกรรมและชีวิตนักเรียน</p>
                                    </div>
                                </a>
                                
                                <a href="https://www.tiktok.com/@spt_school?_t=ZS-90tOrK4pFtH&_r=1" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-4 bg-gray-50 hover:bg-gray-100 p-4 rounded-lg transition-all duration-300 card-hover border border-gray-200">
                                    <div class="w-12 h-12 bg-black rounded-full flex items-center justify-center">
                                        <i class="fab fa-tiktok text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-bold text-gray-800">TikTok</h3>
                                        <p class="text-gray-600 text-sm">วิดีโอสั้นและเนื้อหาสนุกๆ</p>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Contact Section -->
                    <div class="bg-white rounded-2xl shadow-custom p-8 text-center card-hover">
                        <div class="mb-6">
                            <div class="w-16 h-16 bg-gradient-orange rounded-full mx-auto mb-4 flex items-center justify-center">
                                <i class="fas fa-comments text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">💬 ต้องการสอบถามข้อมูล?</h3>
                            <p class="text-gray-600 mb-6">ติดต่อเราผ่านช่องทางที่สะดวกสำหรับคุณ</p>
                        </div>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                <i class="fas fa-phone text-blue-600 text-2xl mb-2"></i>
                                <h4 class="font-semibold text-gray-800">โทรศัพท์</h4>
                                <p class="text-gray-600 text-sm">074-613-023</p>
                            </div>
                            <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                <i class="fas fa-envelope text-green-600 text-2xl mb-2"></i>
                                <h4 class="font-semibold text-gray-800">อีเมล</h4>
                                <p class="text-gray-600 text-sm">satriphatthalung@spt.ac.th</p>
                            </div>
                            <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                <i class="fas fa-map text-purple-600 text-2xl mb-2"></i>
                                <h4 class="font-semibold text-gray-800">มาเยี่ยมชม</h4>
                                <p class="text-gray-600 text-sm">จ.-ศ. 08:00-16:30</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page hidden">
            <section class="py-16">
                <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="bg-white rounded-lg shadow-custom p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-3xl font-bold text-gray-800 mb-2">เข้าสู่ระบบ</h1>
                            <p class="text-gray-600">สำหรับผู้ดูแลระบบ</p>
                        </div>

                        <form id="loginForm" onsubmit="handleLogin(event)">
                            <div class="mb-6">
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">อีเมล</label>
                                <input type="email" id="email" name="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="mb-6">
                                <label for="password" class="block text-sm font-medium text-gray-700 mb-2">รหัสผ่าน</label>
                                <input type="password" id="password" name="password" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors">
                                เข้าสู่ระบบ
                            </button>
                        </form>

                        <div id="loginMessage" class="mt-4 text-center hidden"></div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">ติดต่อเรา</h3>
                    <p class="text-gray-300 text-sm">250 ถนนราเมศวร์ ตำบลคูหาสวรรค์<br>อำเภอเมือง จังหวัดพัทลุง 93000</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">แผนผังเว็บไซต์</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="showPage('home')" class="text-gray-300 hover:text-white">หน้าหลัก</a></li>
                        <li><a href="#" onclick="showPage('about')" class="text-gray-300 hover:text-white">เกี่ยวกับ</a></li>
                        <li><a href="#" onclick="showPage('subjects')" class="text-gray-300 hover:text-white">กลุ่มสาระการเรียนรู้</a></li>
                        <li><a href="#" onclick="showPage('contact')" class="text-gray-300 hover:text-white">ติดต่อ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">ติดตามเรา</h3>
                    <div class="flex space-x-4">
                        <a href="https://www.facebook.com/spt.ac.th" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="https://www.instagram.com/sptschool_official?igsh=MWM0NWl2MmF1cXhvdw==" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="https://www.tiktok.com/@spt_school?_t=ZS-90tOrK4pFtH&_r=1" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white">
                            <i class="fab fa-tiktok text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-300 text-sm">&copy; โรงเรียนสตรีพัทลุง | Satri Phatthalung School</p>
            </div>
        </div>
    </footer>

    <!-- Add Subject Modal -->
    <div id="addSubjectModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">เพิ่มวิชาใหม่</h2>
            <form id="addSubjectForm" onsubmit="handleAddSubject(event)">
                <div class="mb-4">
                    <label for="subjectName" class="block text-sm font-medium text-gray-700 mb-2">ชื่อวิชา</label>
                    <input type="text" id="subjectName" name="subjectName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="mb-4">
                    <label for="topicName" class="block text-sm font-medium text-gray-700 mb-2">ชื่อเรื่อง</label>
                    <input type="text" id="topicName" name="topicName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="mb-4">
                    <label for="subjectLink" class="block text-sm font-medium text-gray-700 mb-2">ลิงก์</label>
                    <input type="url" id="subjectLink" name="subjectLink" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="mb-4">
                    <label for="subjectDescription" class="block text-sm font-medium text-gray-700 mb-2">รายละเอียด</label>
                    <textarea id="subjectDescription" name="subjectDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <div class="mb-6">
                    <label for="subjectType" class="block text-sm font-medium text-gray-700 mb-2">ประเภท</label>
                    <select id="subjectType" name="subjectType" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="สื่อการเรียนการสอน">สื่อการเรียนการสอน</option>
                        <option value="แบบทดสอบ">แบบทดสอบ</option>
                    </select>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">เพิ่ม</button>
                    <button type="button" onclick="hideAddSubjectModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400">ยกเลิก</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAN2qEveZgexEI47zBdsHqc119Y3tRLdrg",
            authDomain: "spt-plus.firebaseapp.com",
            projectId: "spt-plus",
            storageBucket: "spt-plus.firebasestorage.app",
            messagingSenderId: "361913251411",
            appId: "1:361913251411:web:7b17dfada00f08bad878a6",
            measurementId: "G-1H0F32Q54F"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // Global variables
        let currentUser = null;
        let currentSubjectGroup = '';

        // Subject groups data
        const subjectGroups = [
            { id: 'thai', name: 'ภาษาไทย', icon: 'fas fa-book', emoji: '📖', color: 'bg-gradient-blue' },
            { id: 'math', name: 'คณิตศาสตร์', icon: 'fas fa-calculator', emoji: '🔢', color: 'bg-gradient-green' },
            { id: 'science', name: 'วิทยาศาสตร์', icon: 'fas fa-flask', emoji: '🧪', color: 'bg-gradient-purple' },
            { id: 'social', name: 'สังคมศึกษา ศาสนา และวัฒนธรรม', icon: 'fas fa-globe', emoji: '🌍', color: 'bg-gradient-orange' },
            { id: 'health', name: 'สุขศึกษาและพลศึกษา', icon: 'fas fa-heartbeat', emoji: '💪', color: 'bg-gradient-pink' },
            { id: 'art', name: 'ศิลปะ', icon: 'fas fa-palette', emoji: '🎨', color: 'bg-gradient-blue' },
            { id: 'career', name: 'การงานอาชีพ', icon: 'fas fa-tools', emoji: '🔧', color: 'bg-gradient-green' },
            { id: 'foreign', name: 'ภาษาต่างประเทศ', icon: 'fas fa-language', emoji: '🌐', color: 'bg-gradient-purple' },
            { id: 'guidance', name: 'แนะแนว', icon: 'fas fa-compass', emoji: '🧭', color: 'bg-gradient-orange' }
        ];

        // Navigation functions
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(pageId + 'Page').classList.remove('hidden');
            
            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-blue-600', 'font-semibold');
                link.classList.add('text-gray-700');
            });
            
            // Load page-specific content
            if (pageId === 'subjects') {
                loadSubjectGroups();
            }
            
            // Hide mobile menu
            document.getElementById('mobileMenu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // Subject management functions
        function loadSubjectGroups() {
            const container = document.getElementById('subjectGroups');
            container.innerHTML = '';
            
            subjectGroups.forEach((group, index) => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl shadow-custom p-6 card-hover cursor-pointer transform transition-all duration-300';
                card.onclick = () => showSubjectDetail(group.id, group.name);
                card.style.animationDelay = `${index * 0.1}s`;
                
                card.innerHTML = `
                    <div class="text-center relative">
                        <div class="w-20 h-20 ${group.color} rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg relative overflow-hidden">
                            <span class="text-3xl relative z-10">${group.emoji}</span>
                        </div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2 text-elegant">${group.name}</h3>
                        <p class="text-gray-600 text-sm mb-4 text-beautiful">คลิกเพื่อดูรายวิชา</p>
                        <div class="inline-flex items-center text-blue-600 font-semibold text-sm bg-blue-50 px-4 py-2 rounded-full hover:bg-blue-100 transition-colors">
                            <span>เริ่มเรียน</span>
                            <i class="fas fa-arrow-right ml-2 transform group-hover:translate-x-1 transition-transform"></i>
                        </div>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function showSubjectDetail(groupId, groupName) {
            currentSubjectGroup = groupId;
            document.getElementById('subjectDetailTitle').textContent = groupName;
            
            // Show admin controls if user is logged in
            if (currentUser) {
                document.getElementById('adminControls').style.display = 'block';
            }
            
            loadSubjects(groupId);
            showPage('subjectDetail');
        }

        async function loadSubjects(groupId) {
            const container = document.getElementById('subjectList');
            container.innerHTML = '<div class="col-span-full text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i></div>';
            
            try {
                const snapshot = await db.collection('subjects').where('group', '==', groupId).get();
                container.innerHTML = '';
                
                if (snapshot.empty) {
                    container.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">ยังไม่มีรายวิชาในกลุ่มนี้</div>';
                    return;
                }
                
                // Group subjects by subject name
                const subjectsByName = {};
                snapshot.forEach(doc => {
                    const subject = doc.data();
                    if (!subjectsByName[subject.subjectName]) {
                        subjectsByName[subject.subjectName] = [];
                    }
                    subjectsByName[subject.subjectName].push({
                        id: doc.id,
                        ...subject
                    });
                });
                
                // Create cards for each subject
                Object.keys(subjectsByName).forEach(subjectName => {
                    const topics = subjectsByName[subjectName];
                    const card = createSubjectCard(subjectName, topics);
                    container.appendChild(card);
                });
            } catch (error) {
                console.error('Error loading subjects:', error);
                container.innerHTML = '<div class="col-span-full text-center py-8 text-red-500">เกิดข้อผิดพลาดในการโหลดข้อมูล</div>';
            }
        }

        function createSubjectCard(subjectName, topics) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-2xl shadow-custom p-8 card-hover col-span-full border-l-4 border-blue-500';
            
            let topicsHtml = '';
            topics.forEach((topic, index) => {
                const typeColor = topic.type === 'แบบทดสอบ' ? 'bg-gradient-green text-white' : 'bg-gradient-blue text-white';
                const typeEmoji = topic.type === 'แบบทดสอบ' ? '📝' : '📚';
                topicsHtml += `
                    <div class="bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border-2 border-gray-100 hover:border-blue-300 transition-all duration-300 card-hover" style="animation-delay: ${index * 0.1}s">
                        <div class="flex justify-between items-start mb-3">
                            <h4 class="font-bold text-gray-800 text-lg">${topic.name}</h4>
                            <span class="inline-flex items-center px-3 py-1 text-sm font-bold rounded-full ${typeColor} shadow-lg">
                                <span class="mr-1">${typeEmoji}</span>
                                ${topic.type}
                            </span>
                        </div>
                        <p class="text-gray-600 mb-4 leading-relaxed">${topic.description || 'ไม่มีรายละเอียด'}</p>
                        <div class="flex justify-between items-center">
                            <a href="${topic.link}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center bg-gradient-purple text-white px-4 py-2 rounded-full font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                <i class="fas fa-play mr-2"></i>เริ่มเรียน
                            </a>
                            ${currentUser ? `
                                <div class="flex space-x-2">
                                    <button onclick="editTopic('${topic.id}')" class="text-yellow-500 hover:text-yellow-600 p-2 rounded-full hover:bg-yellow-50 transition-colors">
                                        <i class="fas fa-edit text-lg"></i>
                                    </button>
                                    <button onclick="deleteTopic('${topic.id}')" class="text-red-500 hover:text-red-600 p-2 rounded-full hover:bg-red-50 transition-colors">
                                        <i class="fas fa-trash text-lg"></i>
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            card.innerHTML = `
                <div class="mb-8">
                    <div class="flex items-center mb-4">
                        <span class="text-4xl mr-4">📖</span>
                        <div>
                            <h3 class="text-3xl font-bold text-gray-800">${subjectName}</h3>
                            <p class="text-gray-600">เลือกเรื่องที่ต้องการเรียน</p>
                        </div>
                    </div>
                    <div class="w-24 h-1 bg-gradient-blue rounded-full"></div>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${topicsHtml}
                </div>
            `;
            
            return card;
        }

        // Modal functions
        function showAddSubjectModal() {
            document.getElementById('addSubjectModal').classList.remove('hidden');
            document.getElementById('addSubjectModal').classList.add('flex');
        }

        function hideAddSubjectModal() {
            document.getElementById('addSubjectModal').classList.add('hidden');
            document.getElementById('addSubjectModal').classList.remove('flex');
            document.getElementById('addSubjectForm').reset();
        }

        // Subject CRUD operations
        async function handleAddSubject(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const subjectData = {
                subjectName: formData.get('subjectName'),
                name: formData.get('topicName'),
                link: formData.get('subjectLink'),
                description: formData.get('subjectDescription'),
                type: formData.get('subjectType'),
                group: currentSubjectGroup,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            try {
                await db.collection('subjects').add(subjectData);
                hideAddSubjectModal();
                loadSubjects(currentSubjectGroup);
                showMessage('เพิ่มเรื่องเรียบร้อยแล้ว', 'success');
            } catch (error) {
                console.error('Error adding subject:', error);
                showMessage('เกิดข้อผิดพลาดในการเพิ่มเรื่อง', 'error');
            }
        }

        async function deleteTopic(id) {
            // Create custom confirmation modal instead of browser confirm
            const confirmModal = document.createElement('div');
            confirmModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            confirmModal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ยืนยันการลบ</h3>
                    <p class="text-gray-600 mb-6">คุณต้องการลบเรื่องนี้หรือไม่?</p>
                    <div class="flex space-x-4">
                        <button onclick="confirmDelete('${id}')" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700">ลบ</button>
                        <button onclick="cancelDelete()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400">ยกเลิก</button>
                    </div>
                </div>
            `;
            document.body.appendChild(confirmModal);
            
            window.confirmDelete = async function(topicId) {
                try {
                    await db.collection('subjects').doc(topicId).delete();
                    loadSubjects(currentSubjectGroup);
                    showMessage('ลบเรื่องเรียบร้อยแล้ว', 'success');
                } catch (error) {
                    console.error('Error deleting topic:', error);
                    showMessage('เกิดข้อผิดพลาดในการลบเรื่อง', 'error');
                }
                document.body.removeChild(confirmModal);
            };
            
            window.cancelDelete = function() {
                document.body.removeChild(confirmModal);
            };
        }

        async function editTopic(id) {
            try {
                const doc = await db.collection('subjects').doc(id).get();
                if (!doc.exists) {
                    showMessage('ไม่พบข้อมูลที่ต้องการแก้ไข', 'error');
                    return;
                }
                
                const topic = doc.data();
                
                // Fill form with existing data
                document.getElementById('subjectName').value = topic.subjectName || '';
                document.getElementById('topicName').value = topic.name || '';
                document.getElementById('subjectLink').value = topic.link || '';
                document.getElementById('subjectDescription').value = topic.description || '';
                document.getElementById('subjectType').value = topic.type || '';
                
                // Change form submit handler to update instead of add
                const form = document.getElementById('addSubjectForm');
                form.onsubmit = function(event) {
                    handleUpdateTopic(event, id);
                };
                
                // Change modal title
                document.querySelector('#addSubjectModal h2').textContent = 'แก้ไขข้อมูล';
                document.querySelector('#addSubjectModal button[type="submit"]').textContent = 'บันทึก';
                
                showAddSubjectModal();
            } catch (error) {
                console.error('Error loading topic for edit:', error);
                showMessage('เกิดข้อผิดพลาดในการโหลดข้อมูล', 'error');
            }
        }
        
        async function handleUpdateTopic(event, id) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const topicData = {
                subjectName: formData.get('subjectName'),
                name: formData.get('topicName'),
                link: formData.get('subjectLink'),
                description: formData.get('subjectDescription'),
                type: formData.get('subjectType'),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            try {
                await db.collection('subjects').doc(id).update(topicData);
                hideAddSubjectModal();
                loadSubjects(currentSubjectGroup);
                showMessage('แก้ไขข้อมูลเรียบร้อยแล้ว', 'success');
                
                // Reset form handler
                document.getElementById('addSubjectForm').onsubmit = handleAddSubject;
                document.querySelector('#addSubjectModal h2').textContent = 'เพิ่มวิชาใหม่';
                document.querySelector('#addSubjectModal button[type="submit"]').textContent = 'เพิ่ม';
            } catch (error) {
                console.error('Error updating topic:', error);
                showMessage('เกิดข้อผิดพลาดในการแก้ไขข้อมูล', 'error');
            }
        }

        // Authentication functions
        async function handleLogin(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const email = formData.get('email');
            const password = formData.get('password');
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                showMessage('เข้าสู่ระบบเรียบร้อยแล้ว', 'success');
                setTimeout(() => showPage('home'), 1500);
            } catch (error) {
                console.error('Login error:', error);
                showMessage('อีเมลหรือรหัสผ่านไม่ถูกต้อง', 'error');
            }
        }

        // Utility functions
        function showMessage(message, type) {
            const messageDiv = document.getElementById('loginMessage');
            messageDiv.textContent = message;
            messageDiv.className = `mt-4 text-center ${type === 'success' ? 'text-green-600' : 'text-red-600'}`;
            messageDiv.classList.remove('hidden');
            
            setTimeout(() => {
                messageDiv.classList.add('hidden');
            }, 3000);
        }

        // Auth state observer
        auth.onAuthStateChanged(user => {
            currentUser = user;
            if (user) {
                // User is signed in
                document.getElementById('adminControls').style.display = 'block';
            } else {
                // User is signed out
                document.getElementById('adminControls').style.display = 'none';
            }
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            showPage('home');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99525eccf5f97336',t:'MTc2MTU2OTk2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
